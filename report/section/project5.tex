\section{Project 5 - Image Restoration}
\subsection{Project Proposal}
Suppose a blurring degradation as \begin{equation} H(u,v)=\frac{T}{\pi(ua+vb)}\sin[\pi(ua+vb)]e^{-j\pi(ua+vb)} \end{equation}. (a)We need to implement this blurring filter. (b)Use the filter to blur the image \emph{book\_cover.jpg} using parameters $a=b=0.1$ and $T=1$. (c)Add Gaussian noise of $N(0, 650)$ to the blurred image. (d)Restore the blurred image and the blurred noisy image using the inverse filter, Wiener filter, respectively. (e)Add Gaussian noise of 0 and different variances to the blurred image and repeat step (d), investigate the performance of the Wiener filter.

\subsection{Preliminaries}
\subsubsection{A model of the image degradation/restoration process}
\begin{equatoin} g(x,y)=h(x,y)\circ f(x,y)+\eta(x,y) \label{eq:degmodel_sp}\end{equation}This model shows the degradation model in spatial domain where $h(x,y)$ is the spatial representation of the degradation function and $\eta$ is a additive noise. The equivalent frequency domain representation is in \begin{equation} \label{eq:degmodel_fr} G(u,v)=H(u,v)F(u,v)+N(u,v) \end{equation} where the capital letters are the Fourier transforms of the corresponding term in Eq.\ref{eq:degmodel_sp}. The degradation is usually unknown and we have to use estimation methods. 
\subsubsection{Inverse Filtering}
In project 4, we only studied the restoration of images degraded by addictive noise. Here we talk about restoration of images degraded by degradation function $H$. A simple method is to compute estimate $\hat{F}(u,v)$ with inverse filtering by \begin{equation} \hat{F}(u,v)=\frac{G(u,v)}{H(u,v)} \end{equation}. However, when we apply Eq.\ref{eq:degmodel_fr} here, we have \begin{equation} \hat{F}(u,v)=F(u,v)+\frac{H(u,v)}{H(u,v)} \end{equation}. This expression tells us that even we know the exact degradation function $H$, we can not restore the original image. The smaller the value of $H$ is, the more ratio the term $N(u,v)/H(u,v)$ dominate $\hat{F}(u,v)$. One approach to settle the problem is to limit the filter frequencies to values near the origin because the values around the origin are always the highest. 
\subsubsection{Wiener filtering}
Wiener filter, also known as \emph{minimum mean square error filter} is an approach that incorporates both the degradation function and statistical characteristics of noise into the restoration process. In this approach, we consider images and noise as random variables and the objective is to find $\hat{f}$ that minimize the error $e^2=E{(f-\hat{f})^2}$. Based on some assumption, the minimum of the error function is given in the frequency domain by the expression \begin{equation}\begin{aligned} \hat{F}=\left[ \frac{H^*(u,v)S_f(u,v)}{S_f(u,v)|H(u,v)|^2+S_{\eta}(u,v)} \right]G(u,v) \\ =\left[\frac{H^*(u,v)}{|H(u,v)|^2+S_{\eta}(u,v)/S_f(u,v)}\right]G(u,v) \\ =\left[ \frac{1}{H(u,v)}\frac{|H(u,v)^2|}{|H(u,v)|^2+S_{\eta}(u,v)/S_f(u,v)} \right]G(u,v) \end{aligned}\end{equation} in which $H(u,v)$ is the degradation function, $H^*(u,v)$ is the complex conjugate of $H(u,v)$, $|H(u,v)|^2$ is the squared modulus, $S_{\eta}(u,v)=|N(u,v)|^2$ and $S_f{u,v}=|F(u,v)|^2$.